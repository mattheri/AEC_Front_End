(this.webpackJsonpexamen1=this.webpackJsonpexamen1||[]).push([[0],{36:function(e,t,a){e.exports=a(47)},42:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),s=(a(41),a(42),a(5)),o=a(6),u=a.n(o),i=a(9),m=0,d=function(){var e=Object(i.a)(u.a.mark((function e(t,a,n){var r,c,l,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(s.a)(a,2),c=r[0],l=r[1],m>0&&m<10&&(setTimeout(Object(i.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cors-anywhere.herokuapp.com/".concat(t),{headers:{"Content-type":"application/json"}});case 2:if(a=e.sent,!n){e.next=7;break}return e.next=6,a.json();case 6:c[n]=e.sent;case 7:if(n){e.next=11;break}return e.next=10,a.json();case 10:c=e.sent;case 11:try{l((function(e){return Object.assign({},e,c)}))}catch(r){console.error(r)}case 13:case"end":return e.stop()}}),e)}))),500),m++),m>=10&&setTimeout((function(){m=0}),500),m){e.next=18;break}return e.next=6,fetch("https://cors-anywhere.herokuapp.com/".concat(t),{headers:{"Content-type":"application/json"}});case 6:if(o=e.sent,!n){e.next=11;break}return e.next=10,o.json();case 10:c[n]=e.sent;case 11:if(n){e.next=15;break}return e.next=14,o.json();case 14:c=e.sent;case 15:try{l((function(e){return Object.assign({},e,c)}))}catch(d){console.error(d)}m++;case 18:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),f=a(7),p=a(25),h=a(19),b=function(e){var t=Object(s.a)(e.state,2),a=t[0],n=t[1],c=function(e,t){var r=t.split("-")[1];n(Object.assign({},a,function(e,t,a){var n=Object.keys(a).filter((function(e){return e===t}))[0];return Object.defineProperty(a,n,{value:e,writable:!1})}(e,r,a)))},l=r.a.Children.map(e.children,(function(e){return r.a.cloneElement(e,{onChange:c})}));return r.a.createElement(h.a,null,l)},E=function(e){return r.a.createElement(r.a.Fragment,null,!e.noLabel&&r.a.createElement(h.a.Label,{className:e.labelClassName,htmlFor:e.id},e.label),r.a.createElement(h.a.Control,{type:e.type||"text",name:e.id,id:e.id,placeholder:e.placeholder,onChange:function(t){var a=t.currentTarget.value,n=t.currentTarget.id;e.onChange(a,n)},value:e.value,autoComplete:e.autoComplete,className:e.className}))},x=function(e){var t=r.a.useState({email:"",password:""}),n=Object(s.a)(t,2),c=n[0],l=n[1],o=function(){var t=Object(i.a)(u.a.mark((function t(){var n,r,l,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.a)(e.state,2),n[0],r=n[1],t.next=3,a.e(3).then(a.bind(null,49));case 3:for(i in l=t.sent,o=Object.entries(l)[0][1])o[i].email===c.email&&o[i].password===c.password&&function(){var e={isConnected:!0};r((function(t){return Object.assign({},t,e)}))}();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(f.a,{as:"section",fluid:!0},r.a.createElement(f.a,null,r.a.createElement(f.a,{className:"d-flex flex-column align-items-center justify-content-center py-5"},r.a.createElement("i",{className:"fas fa-head-side-headphones px-3 text-white connexion-logo p-3"}),r.a.createElement("h1",{className:"text-white"},"Sneezer")),r.a.createElement(b,{state:[c,l]},r.a.createElement(E,{labelClassName:"text-white-50",className:"mb-3",type:"email",id:"connexion-email",label:"Email",placeholder:"exemple@exemple.com",autoComplete:"username"}),r.a.createElement(E,{labelClassName:"text-white-50",type:"password",id:"connexion-password",label:"Password",autoComplete:"current-password"}),r.a.createElement(p.a,{className:"my-3",onClick:o},"Connexion"))))},g=a(24),v=a(33),k=a(15),w=function(e){return r.a.createElement(k.a,{className:"card-placeholder",style:{width:"18rem",height:"20rem"}},r.a.createElement("div",{className:"placeholder-animation"}))},y=function(e){var t=r.a.useState({}),a=Object(s.a)(t,2),n=a[0],c=a[1],l=e.props,o=(l.id,l.title),u=(l.link,l.cover),i=(l.cover_xl,l.tracklist,l.artist);r.a.useEffect((function(){n=e.props,c((function(e){return Object.assign({},e,n)}))}),[]);var m=function(e){e.currentTarget.classList.toggle("album-hover")};return r.a.createElement(r.a.Suspense,null,e&&r.a.createElement(k.a,{style:{width:"18rem"},onMouseEnter:m,onMouseLeave:m,className:"bg-dark album",onClick:function(){e.onClick(e.props)}},r.a.createElement(k.a.Img,{variant:"top",src:u}),r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Title,{className:"text-white"},o),r.a.createElement(k.a.Text,{className:"text-white-50"},i.name))))},j=a(20),O=a(18),C=r.a.forwardRef((function(e,t){var a=r.a.Children.map(e.children,(function(e){return r.a.createElement(O.a.Item,{className:"px-2"},e)})),n=Object(s.a)(e.state,2),c=n[0],l=n[1],o=!1,u=!1;switch(c.module){case"album":o="Catalogue",u=!1;break;case"track":o="Catalogue",u="Album"}var i=function(e){var t=e.currentTarget.innerText.toLowerCase();c.module=t,l((function(e){return Object.assign({},e,c)}))};return r.a.createElement(j.a,{bg:"dark",expand:"lg"},r.a.createElement(f.a,null,r.a.createElement(j.a.Brand,{className:"text-white"},r.a.createElement("i",{className:"fas fa-head-side-headphones px-3 text-white"}),"Sneezer"),r.a.createElement(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(j.a.Collapse,{id:"basic-navbar-nav",ref:t},r.a.createElement(O.a,{className:"mr-auto"},"catalogue"!==c.module&&r.a.createElement(r.a.Fragment,null,o.length&&r.a.createElement(O.a.Link,{className:"text-white-50",onClick:i},o),u.length&&r.a.createElement(O.a.Link,{className:"text-white-50",onClick:i},u))),r.a.createElement(O.a,{className:"ml-auto"},a))))})),N=r.a.createContext({}),T=function(e){var t=r.a.useState({}),a=Object(s.a)(t,2),n=a[0],c=a[1];return r.a.createElement(N.Provider,{value:[n,c]},e.children)},M=function(e){var t=function(e){var t=r.a.useContext(N),a=Object(s.a)(t,2),n=a[0],c=(a[1],{albums:[],tracks:[],artists:[]});if(e.length){e=e.toLowerCase();var l=function(){var t=Object(i.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object.keys(n).forEach((function(t){var a=t.toLowerCase(),r=[a,n.data.filter((function(e){return e.title===t}))[0]];a.includes(e)&&c.albums.push(r),!a.includes(e)&&c.albums.filter((function(e){return e[0]===a})).length&&c.albums.splice(c.albums.indexOf(r),1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=function(){var t=Object(i.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object.entries(n).forEach((function(t){"data"!==t[0]&&"total"!==t[0]&&"loadedAlbum"!==t[0]&&t[1].data.forEach((function(a){var r=a.title.toLowerCase(),l=[r,a,n.data.filter((function(e){return e.title===t[0]}))];r.includes(e)&&c.tracks.push(l),!r.includes(e)&&c.tracks.filter((function(e){return e[0]===r})).length&&c.tracks.splice(c.tracks.indexOf(l),1)}))}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(i.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.data.forEach((function(t){var a=[t=t.artist.name.toLowerCase(),n.data.filter((function(e){return e.artist.name.toLowerCase()===t}))];t.includes(e)&&c.artists.push(a),!t.includes(e)&&c.artists.filter((function(e){return e[0]===a[0]})).length&&c.artists.splice(c.artists.indexOf(a),1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Promise.all([l(),m(),o()])}return c}(e.value),a=Object(s.a)(e.state,2),n=a[0],c=a[1];return r.a.useEffect((function(){n.results=t,c((function(e){return Object.assign({},e,n)}))}),[e.value]),r.a.createElement(b,{state:e.state},r.a.createElement(E,{placeholder:"Try typing your favorite artist...",id:"navbar-query",autoComplete:"off",noLabel:!0,value:e.value}))},L=a(11),A=function(e){var t=r.a.useState(),a=Object(s.a)(t,2),n=a[0],c=a[1],l=r.a.useState("Loading lyrics..."),o=Object(s.a)(l,2),u=o[0],i=o[1],m=r.a.useContext(N),f=Object(s.a)(m,2),p=f[0],h=(f[1],!0);return r.a.useEffect((function(){var e="https://api.canarado.xyz/lyrics/".concat(p.data.loadedTrack.title);d(e,[n,c]),i("Loading lyrics..."),setTimeout((function(){i("Couldn't find the lyrics :("),h=!1}),1e4)}),[p.data.loadedTrack]),r.a.createElement("section",null,n&&n.content.map((function(e,t){if(e.artist.includes(p.data.loadedTrack.artist.name)&&e.title.includes(p.data.loadedTrack.title))return h=!1,r.a.createElement("p",{key:t*Math.random()+100,className:"text-white text-center py-5"},e.lyrics)})),h&&r.a.createElement("p",{className:"text-white text-center py-5"},u))},S=function(e){return r.a.createElement(r.a.Fragment,null,e.data.map((function(t,a){return r.a.createElement(L.a.Item,{key:a*(100*Math.random()),className:"track-item",variant:"flush",href:t.link},r.a.createElement("a",{onClick:function(){return a=t,void e.onClick(a);var a},className:"text-white px-2"},t.title),r.a.createElement("a",{href:t.preview,target:"_blank",className:"px-2 text-white-50"},"Preview"))})))},F=function(e){var t=r.a.useState(),a=Object(s.a)(t,2),n=a[0],c=a[1],l=Object(s.a)(e.data[1],2),o=l[0],u=l[1],i=r.a.useContext(N),m=Object(s.a)(i,2),p=m[0],h=m[1];r.a.useEffect((function(){p.hasOwnProperty(p.data.loadedAlbum.title)?(n=p[p.data.loadedAlbum.title],c((function(e){return Object.assign({},e,n)}))):d(p.data.loadedAlbum.tracklist,[n,c])}),[p.data.loadedAlbum]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"album-cover-image d-flex flex-column justify-content-center align-items-center",style:{backgroundImage:'url("'.concat(p.data.loadedAlbum.cover_xl,'")')}},r.a.createElement("h1",{className:"text-white"},p.data.loadedAlbum.title),"track"===o.module&&r.a.createElement("h4",{className:"text-white"},p.data.loadedTrack&&p.data.loadedTrack.title)),r.a.createElement(f.a,{className:"d-flex justify-content-center track-list",fluid:"sm"},"album"===o.module?r.a.createElement(L.a,{className:"w-100 py-5"},r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(w,null)},n&&r.a.createElement(S,{data:n.data,onClick:function(e){p.data.loadedTrack=e,h((function(e){return Object.assign({},e,p)})),o.module="track",u((function(e){return Object.assign({},e,o)}))}}))):r.a.createElement(A,null)))},I=function(e){var t=document.getElementById("portal-root"),a=document.createElement("div");return r.a.useEffect((function(){return t.appendChild(a),function(){return t.removeChild(a)}}),[a,t]),Object(c.createPortal)(e.children,a)},P=function(e){var t=Object(s.a)(e.state[0],2),a=t[0],n=t[1],c=Object(s.a)(e.state[1],2),l=c[0],o=c[1],u=r.a.useContext(N),i=Object(s.a)(u,2),m=i[0],d=i[1],p=a.results,h=function(e){e.currentTarget.classList.toggle("active")},b=function(e,t){a.query="",n((function(e){return Object.assign({},e,a)})),"album"!==e.currentTarget.id&&"artist"!==e.currentTarget.id||(m.data.loadedAlbum=t[1],l.module="album"),"track"===e.currentTarget.id&&(m.data.loadedAlbum=t[1][0],m.data.loadedTrack=t[0],l.module="track"),d((function(e){return Object.assign({},e,m)})),o((function(e){return Object.assign({},e,l)}))};return r.a.createElement(f.a,{className:"search-results",fluid:!0,style:{top:"".concat(e.top?e.top:"0","px"),height:"".concat(e.height?e.height:"0","px")}},r.a.createElement(f.a,null,r.a.createElement(L.a,null,p.artists.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-white text-center"},"Artists"),p.artists.map((function(e,t){return r.a.createElement(L.a.Item,{id:"artist",onClick:function(t){return b(t,[e[0],e[1][0]])},onMouseEnter:h,onMouseLeave:h,key:t*Math.random()+Math.random()*t,as:"a",className:"d-flex result-list-item"},e[0])}))),p.albums.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-white text-center"},"Albums"),p.albums.map((function(e,t){if("data"!==e[0]&&"total"!==e[0]&&"loadedalbum"!==e[0])return r.a.createElement(L.a.Item,{onMouseEnter:h,onMouseLeave:h,key:t*Math.random()+Math.random()*t,as:"a",id:"album",onClick:function(t){return b(t,[e[0],e[1]])},className:"d-flex result-list-item"},e[0],r.a.createElement("p",{key:t*Math.random()+Math.random()*t,className:"text-black-50 pl-3"},e[1].artist.name))}))),p.tracks.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-white text-center"},"Tracks"),p.tracks.map((function(e,t){return r.a.createElement(L.a.Item,{onMouseEnter:h,onMouseLeave:h,key:t*Math.random()+Math.random()*t,as:"a",id:"track",className:"d-flex result-list-item",onClick:function(t){return b(t,[e[1],e[2]])}},e[0],r.a.createElement("p",{key:t*Math.random()+Math.random()*t,className:"text-black-50 pl-3"},"Album: ".concat(e[2][0].title)),r.a.createElement("p",{key:t*Math.random()+Math.random()*t,className:"text-black-50 pl-3"},"Artist: ".concat(e[1].artist.name)))}))))))},q=function(e){var t,a=r.a.useState({query:""}),n=Object(s.a)(a,2),c=n[0],l=n[1],o=Object(s.a)(e.state[0],2),m=o[0],h=o[1],b=Object(s.a)(e.state[1],2),E=b[0],x=(b[1],r.a.useContext(N)),k=Object(s.a)(x,2),j=k[0],O=k[1],T=r.a.useRef(),L=r.a.useRef(),A=function(e){j.data.loadedAlbum=e,m.module="album",h((function(e){return Object.assign({},e,m)})),O((function(e){return Object.assign({},e,j)}))},S=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.data.forEach((function(e){setTimeout(Object(i.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d(e.tracklist,[j,O],e.title);case 1:case"end":return t.stop()}}),t)}))),500)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){j=E.albums,O((function(e){return Object.assign({},e,j)})),void 0!==j&&j.hasOwnProperty("data")&&S(),T.current.clientHeight,T.current.offsetTop,window.addEventListener("resize",(function(){T.current.clientHeight,T.current.offsetTop})),L.current!==t&&(t=L.current)}),[E]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{state:[m,h],ref:L},r.a.createElement(M,{state:[c,l],value:c&&c.query}),r.a.createElement(p.a,{className:"py-1",variant:"danger",onClick:function(){h({isConnected:!1,module:"catalogue"})}},"Deconnexion")),r.a.createElement(f.a,{className:"position-relative",ref:T,fluid:!0},"catalogue"===m.module&&r.a.createElement(r.a.Suspense,null,r.a.createElement(v.a,null,j.data&&j.data.map((function(e,t){return r.a.createElement(r.a.Suspense,{key:t*Math.random()+100,fallback:r.a.createElement(w,null)},r.a.createElement(g.a,{className:"d-flex justify-content-center align-items-center py-3",key:t*Math.random()+100,xs:12,md:6,lg:3},r.a.createElement(y,{key:t*Math.random()+100,props:e,onClick:A})))})))),"catalogue"!==m.module&&r.a.createElement(r.a.Suspense,null,r.a.createElement(v.a,null,r.a.createElement(F,{data:[j.loadedAlbum,[m,h]]}))),c.query.length>0&&r.a.createElement(I,null,c.results&&r.a.createElement(P,{state:[[c,l],[m,h]],top:T.current&&T.current.offsetTop,height:T.current&&T.current.clientHeight}))))};var z=function(){var e=r.a.useState({isConnected:!1,module:"catalogue"}),t=Object(s.a)(e,2),a=t[0],n=t[1],c=r.a.useState({}),l=Object(s.a)(c,2),o=l[0],u=l[1];return r.a.useEffect((function(){d("https://api.deezer.com/chart/0",[o,u])}),[]),r.a.createElement(T,null,r.a.createElement("div",{className:"App"},!a.isConnected&&r.a.createElement(x,{state:[a,n]}),a.isConnected&&r.a.createElement(q,{state:[[a,n],[o,u]]})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.a6071441.chunk.js.map